{"version":3,"file":"static/webpack/static/development/pages/index.js.b4cdc37e13e3984f26dc.hot-update.js","sources":["webpack:///./components/DeleteItem.js"],"sourcesContent":["import React, { Component } from 'react';\nimport {Mutation} from 'react-apollo';\nimport gql from 'graphql-tag';\nimport {ALL_ITEMS_QUERY} from './Items';\n\nconst DELETE_ITEM_MUTATION = gql`\n    mutation DELETE_ITEM_MUTATION($id: ID!) {\n        deleteItem(id: $id) {\n            id\n        }\n    }\n`;\n\nexport default class DeleteItem extends Component {\n\n    update = (cache, payload) => {\n        // Manually update cache on client so it matches server\n        //1. Read cache for the items we want\n        const data = cache.readQuery({query: ALL_ITEMS_QUERY});\n        \n        //2. Filter deleted item out of the page\n        data.items = data.items.filter(item => item.id !== payload.data.deleteItem.id)\n\n    }\n\n    render() {\n        return (\n            <Mutation \n            mutation={DELETE_ITEM_MUTATION} \n            variables={{id: this.props.id}}\n            update={this.update}\n            >\n                {(deleteItem, {error}) => (\n                    <button onClick={() => {\n                        if (confirm('Are you sure you want to delete this?')) {\n                            deleteItem();\n                        }\n                    }}>{this.props.children}</button>\n                )}\n \n            </Mutation>\n           \n        )\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAOA;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;;;;;;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAWA;;;;AA9BA;AACA;;;;;A","sourceRoot":""}